# 유닛 시스템 기획

## 개요

전투 필드의 모든 유닛 공통 구조와 전투 유닛(아군/적)의 행동을 다룬다.

## 관련 문서

- [전투 시스템](CombatSystem.md) - 필드 구조, 전투 흐름
- [영웅 시스템](../Global/Hero.md) - 영웅 이동, 카드 기반 행동
- [카드 시스템](../CardDeck/Card.md) - 유닛 카드를 통한 소환
- [적 & 보스](Enemy.md) - 적 유닛 스탯, 키워드

---

## 1. 유닛 계층 구조

전투 필드에 존재하는 모든 엔티티는 유닛이다. 영웅과 적 기지도 유닛의 하위 타입이며, 공통 속성을 공유한다.

```
유닛 베이스 (UnitBase) — HP, 필드 존재, 피격/사망, 유닛 효과 대상
├── 전투 유닛 (CombatUnit) — ATK, SPD, ASPD, Range, 자동 전투
│   ├── 아군 유닛 — 카드로 소환, 자동 전진
│   └── 적 유닛 — 스폰 시스템으로 생산, 자동 전진
├── 영웅 (Hero) — 수동 이동, 카드 시전, 캠페인 HP 유지
└── 적 기지 (EnemyBase) — 고정 위치, 적 스폰, 버스트 스폰
```

### 1.1 유닛 공통 속성

모든 유닛이 공유하는 속성이다.

| 속성 | 설명 |
|------|------|
| HP | 체력. 0이 되면 사망하여 필드에서 제거 |
| 필드 존재 | 전투 필드 위에 물리적으로 존재 |
| 피격/사망 처리 | 데미지를 받고, HP 0 시 사망 처리 |
| 유닛 효과 대상 | 화상, 둔화, 재생 등 유닛 효과의 대상이 될 수 있음 |
| HP 바 | 필드에서 유닛 위에 HP 바 표시 |
| 데미지 팝업 | 피격 시 데미지 숫자 팝업 |

### 1.2 하위 타입 요약

| 유닛 타입 | 설명 | 상세 문서 |
|-----------|------|-----------|
| 전투 유닛 | 자동으로 이동하며 전투하는 아군/적 유닛 | 본 문서 2~5절 |
| 영웅 | 플레이어가 조작하는 유닛. 기지 역할을 겸함 | [영웅 시스템](../Global/Hero.md) |
| 적 기지 | 고정 위치에서 적을 생산하는 유닛 | [전투 시스템](CombatSystem.md) |

---

## 2. 전투 유닛 스탯

전투 유닛(아군/적)이 가지는 스탯이다. 영웅과 적 기지에는 해당하지 않는다.

| 스탯 | 약어 | 설명 |
|------|------|------|
| 체력 | HP | 0이 되면 사망. 필드에서 제거 |
| 공격력 | ATK | 기본 공격의 데미지 |
| 이동 속도 | SPD | 초당 이동 거리 |
| 공격 속도 | ASPD | 초당 공격 횟수 |
| 사거리 | Range | 공격 가능 거리. 근거리(Melee) / 원거리(Ranged) |
| 유닛 벨류 | Value | 유닛의 가치 (적: 처치 시 마나 획득 + 스폰 예산 기준, 아군: 마나 비용/강도 기준) |

---

## 3. 전투 유닛 행동 패턴

1. **소환**: 화면 왼쪽 가장자리에서 출현
2. **전진**: 자동으로 오른쪽(적 방향)으로 이동
3. **전투**: 사거리 내에 적이 있으면 정지하고 공격
4. **타겟팅**: 기본적으로 가장 가까운 적을 공격 (타입별 예외 가능)
5. **사망**: HP 0 → 사망 애니메이션 → 필드에서 제거

---

## 4. 연출

| 유닛 상태 | 애니메이션 |
|-----------|-----------|
| 대기(Idle) | 숨쉬기/흔들림 |
| 이동(Move) | 걷기/달리기 |
| 공격(Attack) | 공격 모션 |
| 피격(Hit) | 빨간 플래시 |
| 힐(Heal) | 초록빛 파티클 상승 |
| 사망(Die) | 쓰러짐 → 페이드아웃 |
| 스킬(Skill) | 고유 스킬 연출 |

- 프레임 기반 스프라이트 애니메이션
- 영웅은 전투 중 Idle, 이동, 피격만 사용 — 카드 사용 시 영웅 모션 없이 이펙트/파티클로만 연출 (상세: [영웅 시스템](../Global/Hero.md))

---

## 5. 유닛 효과

전장에 배치된 유닛에게 부여되는 효과. 카드 키워드와는 별개 개념이다.
카드/스펠 등에 의해 부여되며, 일정 시간 후 해제. **중첩 불가** — 같은 효과 재적용 시 지속시간만 갱신

파티클 방향 규칙: **긍정 효과 = 상승 파티클(↑)**, **부정 효과 = 하강 파티클(↓)**

| 유닛 효과 | 지속 | 설명 | 연출 |
|-----------|------|------|------|
| **강화** | 영구 | 주변 아군 유닛의 스탯을 강화 | 붉은색 상승 파티클 |
| **재생** | 일시 | 일정 시간 동안 HP 지속 회복 | 초록빛 상승 파티클 (힐 공유) |
| **둔화** | 일시 | 이동/공격 속도 감소 | 파란색 하강 파티클 + 애니메이션 재생 속도 감소 |
| **기절** | 일시 | 이동/공격 등 모든 행동 불가 | 별 파티클 회전 (머리 위) |
